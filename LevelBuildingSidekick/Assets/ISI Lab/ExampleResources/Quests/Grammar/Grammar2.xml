<?xml version="1.0" encoding="utf-8"?>
<grammar xml:lang="es-CL" root="Quest" version="1.0" xmlns="http://www.w3.org/2001/06/grammar">

  <!-- Root quest node -->
  <rule id="Quest">
    <one-of>
      <item> <ruleref uri="#QuestBranch" /> </item>
      <item> <ruleref uri="#QuestSequence" /> </item>
      <item> <ruleref uri="#Action" /> </item>
    </one-of>
  </rule>

  <!-- Sequential quest steps -->
  <rule id="QuestSequence">
    <item>
      <ruleref uri="#Action" />
      <ruleref uri="#Quest" />
    </item>
  </rule>

  <!-- A branching path -->
  <rule id="QuestBranch">
    <item>
      <ruleref uri="#Quest" />
      or
      <ruleref uri="#Quest" />
      <item repeat="0-1">
        <ruleref uri="#Merge" />
      </item>
    </item>
  </rule>

  <!-- Merge step after a branch -->
  <rule id="Merge">
    <item> merge </item>
  </rule>

  <!-- An atomic quest action -->
  <rule id="Action">
    <one-of>
      <item> explore </item>
      <item> go to </item>
      <item> stealth take </item>
      <item> gather </item>
      <item> kill </item>
      <item> capture </item>
      <item> spy report </item>
      <item> read </item>
      <item> listen </item>
      <item> give listen </item>
    </one-of>
  </rule>

</grammar>
